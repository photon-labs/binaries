<% if !value || value.blank? %>
<textarea rows="5" cols="80" class="width100" name="<%= h property.getKey() -%>" id="input_<%= h property.getKey() -%>"></textarea>
<%
else
license = controller.java_facade.parseLicense(value)
date = license.getExpirationDateAsString()
%>
<div class="width100">
<textarea rows="6" name="<%= h property.getKey() -%>" id="input_<%= h property.getKey() -%>" style="float: left;width: 390px"><%= h value -%></textarea>
<div style="margin-left: 400px">
<table>
<tr>
<td class="form-key-cell">Product:</td>
<td class="form-val-cell"><%= license.getProduct() || '-' -%></td>
</tr>
<tr>
<td class="form-key-cell">Organization:</td>
<td><%= license.getOrganization() || '-' -%></td>
</tr>
<tr>
<td class="form-key-cell">Expiration:</td>
<td>
<% if license.getExpirationDateAsString()
formatted_date = l(Date.parse(license.getExpirationDateAsString()))
%>
<%= license.isExpired() ? "<span class='error'>#{formatted_date}</span>" : formatted_date -%>
<% else %>
-
<% end %>
</td>
</tr>
<tr>
<td class="form-key-cell">Type:</td>
<td><%= license.getType() || '-' -%></td>
</tr>
<tr>
<td class="form-key-cell">Server:</td>
<td><%= license.getServer() || '-' -%></td>
</tr>
</table>
</div>
</div>
<% end %>
